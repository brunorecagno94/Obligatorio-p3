@model IEnumerable<Obligatorio.WebApp.Models.VMEnvioListado>

@{
	ViewData["Title"] = "Index";
}

<h1>Envíos</h1>

@ViewBag.message

<div class="d-flex justify-content-between align-items-center mb-3">
	<form action="/Envio/BuscarPorNumeroDeTracking" class="d-flex gap-2 align-items-center">
		<input type="text" name="numeroTracking" class="form-control form-control-sm" placeholder="Número de tracking" />
		<button type="submit" class="btn btn-primary btn-sm">Buscar</button>
		<a asp-action="Index" class="btn btn-secondary btn-sm">Restablecer</a>
	</form>
	<form asp-action="FiltrarPorRangoFechas" method="get" class="d-flex align-items-end gap-2 mb-3">
		<div>
			<label for="fechaInicio" class="form-label mb-0">Desde</label>
			<input type="date" id="fechaInicio" name="fechaInicio" class="form-control form-control-sm" />
		</div>
		<div>
			<label for="fechaFin" class="form-label mb-0">Hasta</label>
			<input type="date" id="fechaFin" name="fechaFin" class="form-control form-control-sm" />
		</div>
		<button type="submit" class="btn btn-primary btn-sm">Filtrar</button>
	</form>
	<p class="mb-0">
		<a asp-action="Create" class="btn btn-outline-primary btn-sm d-flex align-items-center gap-1">
			<span class="fw-bold fs-5 lh-1">+</span> Nuevo envío
		</a>
	</p>

</div>
@if (Model.Count() == 0)
{
	<div class="alert alert-info">No hay envíos registrados.</div>
}
else
{
	<table class="table">
		<thead>
			<tr>
				<th>
					Número de tracking
				</th>
				<th>
					Tipo de envío
				</th>
				<th>
					Email del cliente
				</th>
				<th>
					Fecha de salida
				</th>
				<th>
					Estado
				</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			@foreach (var item in Model)
			{
				<tr>
					<td>
						@Html.DisplayFor(modelItem => item.NumeroTracking)
					</td>
					<td>@(item.EsUrgente ? "Urgente" : "Común")</td>
					<td>
						@Html.DisplayFor(modelItem => item.EmailCliente)
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.FechaSalida)
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.Estado)
					</td>
					<td>
						@Html.ActionLink("Detalle de comentarios", "Comentarios", new { id = item.Id })
						@Html.ActionLink("Finalizar envío", "FinalizarEnvio", new { id = item.Id })
					</td>
				</tr>
			}
		</tbody>
	</table>
}
